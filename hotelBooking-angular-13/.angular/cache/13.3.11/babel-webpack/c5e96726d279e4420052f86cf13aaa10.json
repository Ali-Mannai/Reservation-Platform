{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\MANNAI ALI\\\\Desktop\\\\PFA hotel\\\\hotelBooking-angular-13\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport axios from 'axios';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nexport class PaymentComponent {\n  constructor(route) {\n    this.route = route;\n    this.amount = 100;\n  }\n\n  ngOnInit() {\n    // Récupérer le montant depuis les query params\n    this.route.queryParams.subscribe(params => {\n      this.amount = +params['amount']; // Convertir en nombre\n    });\n  }\n\n  processPayment() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      try {\n        const response = yield axios.post('http://localhost:3000/api/payment', {\n          amount: _this.amount\n        }); // Rediriger vers l'URL de paiement obtenue\n\n        window.location.href = response.data.payment_url;\n      } catch (error) {\n        console.error('Une erreur s\\'est produite lors de la récupération de l\\'URL de paiement :', error); // Gérer l'erreur, par exemple afficher un message à l'utilisateur\n      }\n    })();\n  }\n\n}\n\nPaymentComponent.ɵfac = function PaymentComponent_Factory(t) {\n  return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n\nPaymentComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: PaymentComponent,\n  selectors: [[\"app-payment\"]],\n  decls: 14,\n  vars: 1,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-6\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"amount\"], [\"type\", \"number\", \"id\", \"amount\", \"name\", \"amount\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]],\n  template: function PaymentComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\n      i0.ɵɵtext(6, \"Paiement\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"form\", 6);\n      i0.ɵɵlistener(\"ngSubmit\", function PaymentComponent_Template_form_ngSubmit_7_listener() {\n        return ctx.processPayment();\n      });\n      i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 8);\n      i0.ɵɵtext(10, \"Montant\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function PaymentComponent_Template_input_ngModelChange_11_listener($event) {\n        return ctx.amount = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(12, \"button\", 10);\n      i0.ɵɵtext(13, \"Proc\\u00E9der au paiement\");\n      i0.ɵɵelementEnd()()()()()()();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngModel\", ctx.amount);\n    }\n  },\n  directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm, i2.NumberValueAccessor, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXltZW50LmNvbXBvbmVudC5jc3MifQ== */\"]\n});","map":{"version":3,"sources":["C:/Users/MANNAI ALI/Desktop/PFA hotel/hotelBooking-angular-13/src/app/components/payment/payment.component.ts"],"names":["axios","i0","i1","i2","PaymentComponent","constructor","route","amount","ngOnInit","queryParams","subscribe","params","processPayment","response","post","window","location","href","data","payment_url","error","console","ɵfac","PaymentComponent_Factory","t","ɵɵdirectiveInject","ActivatedRoute","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","PaymentComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","PaymentComponent_Template_form_ngSubmit_7_listener","PaymentComponent_Template_input_ngModelChange_11_listener","$event","ɵɵadvance","ɵɵproperty","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","NumberValueAccessor","DefaultValueAccessor","NgControlStatus","NgModel","styles"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/router\";\r\nimport * as i2 from \"@angular/forms\";\r\nexport class PaymentComponent {\r\n    constructor(route) {\r\n        this.route = route;\r\n        this.amount = 100;\r\n    }\r\n    ngOnInit() {\r\n        // Récupérer le montant depuis les query params\r\n        this.route.queryParams.subscribe(params => {\r\n            this.amount = +params['amount']; // Convertir en nombre\r\n        });\r\n    }\r\n    async processPayment() {\r\n        try {\r\n            const response = await axios.post('http://localhost:3000/api/payment', { amount: this.amount });\r\n            // Rediriger vers l'URL de paiement obtenue\r\n            window.location.href = response.data.payment_url;\r\n        }\r\n        catch (error) {\r\n            console.error('Une erreur s\\'est produite lors de la récupération de l\\'URL de paiement :', error);\r\n            // Gérer l'erreur, par exemple afficher un message à l'utilisateur\r\n        }\r\n    }\r\n}\r\nPaymentComponent.ɵfac = function PaymentComponent_Factory(t) { return new (t || PaymentComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute)); };\r\nPaymentComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: PaymentComponent, selectors: [[\"app-payment\"]], decls: 14, vars: 1, consts: [[1, \"container\", \"mt-5\"], [1, \"row\", \"justify-content-center\"], [1, \"col-md-6\"], [1, \"card\"], [1, \"card-body\"], [1, \"card-title\"], [3, \"ngSubmit\"], [1, \"form-group\"], [\"for\", \"amount\"], [\"type\", \"number\", \"id\", \"amount\", \"name\", \"amount\", \"disabled\", \"\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\"]], template: function PaymentComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4)(5, \"h5\", 5);\r\n        i0.ɵɵtext(6, \"Paiement\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(7, \"form\", 6);\r\n        i0.ɵɵlistener(\"ngSubmit\", function PaymentComponent_Template_form_ngSubmit_7_listener() { return ctx.processPayment(); });\r\n        i0.ɵɵelementStart(8, \"div\", 7)(9, \"label\", 8);\r\n        i0.ɵɵtext(10, \"Montant\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(11, \"input\", 9);\r\n        i0.ɵɵlistener(\"ngModelChange\", function PaymentComponent_Template_input_ngModelChange_11_listener($event) { return ctx.amount = $event; });\r\n        i0.ɵɵelementEnd()();\r\n        i0.ɵɵelementStart(12, \"button\", 10);\r\n        i0.ɵɵtext(13, \"Proc\\u00E9der au paiement\");\r\n        i0.ɵɵelementEnd()()()()()()();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(11);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.amount);\r\n    } }, directives: [i2.ɵNgNoValidate, i2.NgControlStatusGroup, i2.NgForm, i2.NumberValueAccessor, i2.DefaultValueAccessor, i2.NgControlStatus, i2.NgModel], styles: [\"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwYXltZW50LmNvbXBvbmVudC5jc3MifQ== */\"] });\r\n"]},"metadata":{},"sourceType":"module"}